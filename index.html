<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–º–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ –¥–æ–º–∞—à–∫–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #667eea;
            --primary-dark: #5a6fd8;
            --secondary: #764ba2;
            --success: #4CAF50;
            --warning: #ff9800;
            --danger: #f44336;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        header {
            background: var(--dark);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .sync-buttons {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 10px;
        }

        .sync-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .sync-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .mobile-menu-btn {
            display: none;
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            opacity: 0.8;
            font-size: 1.1rem;
        }

        .app-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 80vh;
        }

        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar {
            background: var(--light);
            padding: 20px;
            border-right: 1px solid #dee2e6;
        }

        .nav-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .nav-btn:hover {
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .nav-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .modal h3 {
            margin-bottom: 15px;
            text-align: center;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-buttons button {
            flex: 1;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            padding: 20px;
            background: white;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è */
        .add-form {
            background: var(--light);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        /* –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π */
        .homework-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .homework-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid var(--primary);
            transition: all 0.3s ease;
            position: relative;
        }

        .homework-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .homework-item.completed {
            opacity: 0.7;
            border-left-color: var(--success);
        }

        .homework-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .subject {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
        }

        .badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .badge-oral {
            background: #e3f2fd;
            color: #1976d2;
        }

        .badge-written {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .badge-humanities {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .badge-science {
            background: #fff3e0;
            color: #ef6c00;
        }

        .task {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .homework-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .date {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        /* –ö–∞–ª–µ–Ω–¥–∞—Ä—å */
        .calendar {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            padding: 10px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calendar-day:hover {
            background: var(--light);
        }

        .calendar-day.active {
            background: var(--primary);
            color: white;
        }

        .calendar-day.has-homework {
            background: #fff3cd;
            border: 2px solid var(--warning);
        }

        /* –î–æ–ª–≥–∏ */
        .overdue-item {
            border-left-color: var(--danger) !important;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .empty-message {
            text-align: center;
            color: var(--gray);
            font-style: italic;
            padding: 40px;
            font-size: 1.2rem;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .app-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .sync-buttons {
                position: static;
                transform: none;
                justify-content: center;
                margin-top: 10px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .homework-header {
                flex-direction: column;
                gap: 10px;
            }
            
            .homework-footer {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .actions {
                width: 100%;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
            <h1>üìö –£–º–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ –¥–æ–º–∞—à–∫–∏</h1>
            <div class="subtitle">–í—Å—ë —Ç–≤–æ—ë –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</div>
            <div class="sync-buttons">
                <button class="sync-btn" onclick="showExportModal()">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
                <button class="sync-btn" onclick="showImportModal()">üì• –ò–º–ø–æ—Ä—Ç</button>
            </div>
        </header>

        <div class="app-content">
            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="sidebar">
                <button class="nav-btn active" onclick="showPage('today')">üìÖ –°–µ–≥–æ–¥–Ω—è</button>
                <button class="nav-btn" onclick="showPage('add')">‚ûï –î–æ–±–∞–≤–∏—Ç—å –î–ó</button>
                <button class="nav-btn" onclick="showPage('overdue')">‚è∞ –î–æ–ª–≥–∏</button>
                <button class="nav-btn" onclick="showPage('all')">üìã –í—Å–µ –∑–∞–¥–∞–Ω–∏—è</button>
                <button class="nav-btn" onclick="showPage('calendar')">üóìÔ∏è –ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
                <button class="nav-btn" onclick="showPage('archive')">üìÅ –ê—Ä—Ö–∏–≤</button>
                
                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6;">
                    <div class="stat-card" style="margin: 0;">
                        <div class="stat-number" id="statsPending">0</div>
                        <div class="stat-label">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                    </div>
                    <div class="stat-card" style="margin: 10px 0 0 0;">
                        <div class="stat-number" id="statsCompleted">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                    </div>
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="main-content">
                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞: –°–µ–≥–æ–¥–Ω—è -->
                <div id="today" class="page active">
                    <h2>–ó–∞–¥–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
                    <div class="homework-list" id="todayList"></div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞: –î–æ–±–∞–≤–∏—Ç—å –î–ó -->
                <div id="add" class="page">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
                    <div class="add-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="subject">–ü—Ä–µ–¥–º–µ—Ç:</label>
                                <input type="text" id="subject" placeholder="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –ò—Å—Ç–æ—Ä–∏—è...">
                            </div>
                            <div class="form-group">
                                <label for="dueDate">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                                <input type="date" id="dueDate">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="type">–¢–∏–ø:</label>
                                <select id="type">
                                    <option value="oral">üó£Ô∏è –£—Å—Ç–Ω–æ</option>
                                    <option value="written">‚úçÔ∏è –ü–∏—Å—å–º–µ–Ω–Ω–æ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="direction">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</label>
                                <select id="direction">
                                    <option value="humanities">üìñ –ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω–æ–µ</option>
                                    <option value="science">üî¨ –§–∏–∑–º–∞—Ç</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="task">–ó–∞–¥–∞–Ω–∏–µ:</label>
                            <textarea id="task" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å..."></textarea>
                        </div>
                        <button class="btn btn-primary" onclick="addHomework()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
                    </div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞: –î–æ–ª–≥–∏ -->
                <div id="overdue" class="page">
                    <h2>–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                    <div class="homework-list" id="overdueList"></div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞: –í—Å–µ –∑–∞–¥–∞–Ω–∏—è -->
                <div id="all" class="page">
                    <h2>–í—Å–µ –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                    <div class="homework-list" id="allList"></div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞: –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
                <div id="calendar" class="page">
                    <h2>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–¥–∞–Ω–∏–π</h2>
                    <div class="calendar">
                        <div class="calendar-header">
                            <button class="btn" onclick="changeMonth(-1)">‚Üê</button>
                            <h3 id="currentMonth"></h3>
                            <button class="btn" onclick="changeMonth(1)">‚Üí</button>
                        </div>
                        <div class="calendar-grid" id="calendarGrid"></div>
                    </div>
                    <div id="selectedDateHomework"></div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞: –ê—Ä—Ö–∏–≤ -->
                <div id="archive" class="page">
                    <h2>–ê—Ä—Ö–∏–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π</h2>
                    <div class="homework-list" id="archiveList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <h3>üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
            <p>–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç –∫–æ–¥ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –µ–≥–æ. –ü–æ—Ç–æ–º –≤—Å—Ç–∞–≤—å –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤ –æ–∫–Ω–æ –∏–º–ø–æ—Ä—Ç–∞.</p>
            <textarea id="exportData" style="width: 100%; height: 200px; margin: 15px 0; font-family: monospace;" readonly></textarea>
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="copyExportData()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn" onclick="hideExportModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–º–ø–æ—Ä—Ç–∞ -->
    <div class="modal" id="importModal">
        <div class="modal-content">
            <h3>üì• –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
            <p>–í—Å—Ç–∞–≤—å —Å—é–¥–∞ –∫–æ–¥ –∏–∑ —ç–∫—Å–ø–æ—Ä—Ç–∞:</p>
            <textarea id="importData" style="width: 100%; height: 200px; margin: 15px 0; font-family: monospace;" placeholder="–í—Å—Ç–∞–≤—å —Å—é–¥–∞ –∫–æ–¥..."></textarea>
            <div class="modal-buttons">
                <button class="btn btn-success" onclick="importData()">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn btn-danger" onclick="hideImportModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
            <p style="color: var(--danger); font-size: 12px; margin-top: 10px;">
                ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –≠—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ!
            </p>
        </div>
    </div>

    <script>
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
        let homeworkDB = JSON.parse(localStorage.getItem('homeworkDB')) || {
            homework: [],
            settings: {
                currentMonth: new Date().getMonth(),
                currentYear: new Date().getFullYear()
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            showTodayHomework();
            generateCalendar();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Ñ–æ—Ä–º–µ
            document.getElementById('dueDate').value = new Date().toISOString().split('T')[0];
        });

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(pageId).classList.add('active');
            document.querySelector(`.nav-btn[onclick="showPage('${pageId}')"]`).classList.add('active');

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            switch(pageId) {
                case 'today':
                    showTodayHomework();
                    break;
                case 'overdue':
                    showOverdueHomework();
                    break;
                case 'all':
                    showAllHomework();
                    break;
                case 'calendar':
                    generateCalendar();
                    break;
                case 'archive':
                    showArchive();
                    break;
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
        function addHomework() {
            const subject = document.getElementById('subject').value.trim();
            const task = document.getElementById('task').value.trim();
            const type = document.getElementById('type').value;
            const direction = document.getElementById('direction').value;
            const dueDate = document.getElementById('dueDate').value;

            if (!subject || !task || !dueDate) {
                alert('–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                return;
            }

            const homework = {
                id: Date.now(),
                subject,
                task,
                type,
                direction,
                dueDate,
                completed: false,
                createdAt: new Date().toISOString(),
                completedAt: null
            };

            homeworkDB.homework.push(homework);
            saveToDB();
            updateStats();
            
            // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
            document.getElementById('subject').value = '';
            document.getElementById('task').value = '';
            document.getElementById('dueDate').value = new Date().toISOString().split('T')[0];
            
            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ—Ö–æ–¥
            alert('–ó–∞–¥–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ!');
            showPage('today');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞–Ω–∏—è
        function toggleHomework(id) {
            const homework = homeworkDB.homework.find(hw => hw.id === id);
            if (homework) {
                homework.completed = !homework.completed;
                homework.completedAt = homework.completed ? new Date().toISOString() : null;
                saveToDB();
                updateStats();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                const activePage = document.querySelector('.page.active').id;
                switch(activePage) {
                    case 'today': showTodayHomework(); break;
                    case 'overdue': showOverdueHomework(); break;
                    case 'all': showAllHomework(); break;
                    case 'archive': showArchive(); break;
                }
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
        function deleteHomework(id) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ?')) {
                homeworkDB.homework = homeworkDB.homework.filter(hw => hw.id !== id);
                saveToDB();
                updateStats();
                
                const activePage = document.querySelector('.page.active').id;
                switch(activePage) {
                    case 'today': showTodayHomework(); break;
                    case 'overdue': showOverdueHomework(); break;
                    case 'all': showAllHomework(); break;
                    case 'archive': showArchive(); break;
                }
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
        function showTodayHomework() {
            const today = new Date().toISOString().split('T')[0];
            const todayHomework = homeworkDB.homework.filter(hw => hw.dueDate === today && !hw.completed);
            renderHomeworkList(todayHomework, 'todayList');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
        function showOverdueHomework() {
            const today = new Date().toISOString().split('T')[0];
            const overdueHomework = homeworkDB.homework.filter(hw => 
                hw.dueDate < today && !hw.completed
            );
            renderHomeworkList(overdueHomework, 'overdueList', true);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è
        function showAllHomework() {
            const sortedHomework = [...homeworkDB.homework].sort((a, b) => 
                new Date(a.dueDate) - new Date(b.dueDate)
            );
            renderHomeworkList(sortedHomework, 'allList');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∞—Ä—Ö–∏–≤
        function showArchive() {
            const completedHomework = homeworkDB.homework.filter(hw => hw.completed);
            renderHomeworkList(completedHomework, 'archiveList');
        }

        // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞–Ω–∏–π
        function renderHomeworkList(homeworkArray, containerId, isOverdue = false) {
            const container = document.getElementById(containerId);
            
            if (homeworkArray.length === 0) {
                container.innerHTML = '<div class="empty-message">–ó–∞–¥–∞–Ω–∏–π –Ω–µ—Ç</div>';
                return;
            }

            container.innerHTML = homeworkArray.map(hw => `
                <div class="homework-item ${hw.completed ? 'completed' : ''} ${isOverdue ? 'overdue-item' : ''}">
                    <div class="homework-header">
                        <div>
                            <span class="subject">${hw.subject}</span>
                            <span class="badge ${hw.type === 'oral' ? 'badge-oral' : 'badge-written'}">
                                ${hw.type === 'oral' ? 'üó£Ô∏è –£—Å—Ç–Ω–æ' : '‚úçÔ∏è –ü–∏—Å—å–º–µ–Ω–Ω–æ'}
                            </span>
                            <span class="badge ${hw.direction === 'humanities' ? 'badge-humanities' : 'badge-science'}">
                                ${hw.direction === 'humanities' ? 'üìñ –ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω–æ–µ' : 'üî¨ –§–∏–∑–º–∞—Ç'}
                            </span>
                        </div>
                        <div>
                            <input type="checkbox" class="checkbox" ${hw.completed ? 'checked' : ''} 
                                   onchange="toggleHomework(${hw.id})">
                        </div>
                    </div>
                    <div class="task">${hw.task}</div>
                    <div class="homework-footer">
                        <div class="date">
                            üìÖ –°—Ä–æ–∫: ${formatDate(hw.dueDate)}
                            ${hw.completed ? ` | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: ${formatDate(hw.completedAt)}` : ''}
                        </div>
                        <div class="actions">
                            <button class="btn btn-danger" onclick="deleteHomework(${hw.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // –ö–∞–ª–µ–Ω–¥–∞—Ä—å
        function generateCalendar() {
            const month = homeworkDB.settings.currentMonth;
            const year = homeworkDB.settings.currentYear;
            
            document.getElementById('currentMonth').textContent = 
                new Date(year, month).toLocaleDateString('ru-RU', { month: 'long', year: 'numeric' });
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDay = firstDay.getDay() || 7;
            
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            // –î–Ω–∏ –Ω–µ–¥–µ–ª–∏
            ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'].forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.style.fontWeight = 'bold';
                dayElement.textContent = day;
                calendarGrid.appendChild(dayElement);
            });
            
            // –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –¥–Ω–µ–º
            for (let i = 1; i < startingDay; i++) {
                const emptyElement = document.createElement('div');
                emptyElement.className = 'calendar-day';
                calendarGrid.appendChild(emptyElement);
            }
            
            // –î–Ω–∏ –º–µ—Å—è—Ü–∞
            const today = new Date().toISOString().split('T')[0];
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                const hasHomework = homeworkDB.homework.some(hw => hw.dueDate === dateStr && !hw.completed);
                if (hasHomework) {
                    dayElement.classList.add('has-homework');
                }
                
                if (dateStr === today) {
                    dayElement.classList.add('active');
                }
                
                dayElement.onclick = () => showDateHomework(dateStr);
                calendarGrid.appendChild(dayElement);
            }
        }

        function changeMonth(direction) {
            homeworkDB.settings.currentMonth += direction;
            if (homeworkDB.settings.currentMonth < 0) {
                homeworkDB.settings.currentMonth = 11;
                homeworkDB.settings.currentYear--;
            } else if (homeworkDB.settings.currentMonth > 11) {
                homeworkDB.settings.currentMonth = 0;
                homeworkDB.settings.currentYear++;
            }
            saveToDB();
            generateCalendar();
        }

        function showDateHomework(date) {
            const homework = homeworkDB.homework.filter(hw => hw.dueDate === date);
            const container = document.getElementById('selectedDateHomework');
            
            if (homework.length === 0) {
                container.innerHTML = '<div class="empty-message">–ù–∞ —ç—Ç—É –¥–∞—Ç—É –∑–∞–¥–∞–Ω–∏–π –Ω–µ—Ç</div>';
                return;
            }
            
            renderHomeworkList(homework, 'selectedDateHomework');
        }

        // –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        function showExportModal() {
            const exportData = btoa(JSON.stringify(homeworkDB));
            document.getElementById('exportData').value = exportData;
            document.getElementById('exportModal').style.display = 'flex';
        }

        function hideExportModal() {
            document.getElementById('exportModal').style.display = 'none';
        }

        function showImportModal() {
            document.getElementById('importData').value = '';
            document.getElementById('importModal').style.display = 'flex';
        }

        function hideImportModal() {
            document.getElementById('importModal').style.display = 'none';
        }

        function copyExportData() {
            const exportData = document.getElementById('exportData');
            exportData.select();
            document.execCommand('copy');
            alert('–î–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã!');
        }

        function importData() {
            const importData = document.getElementById('importData').value.trim();
            
            if (!importData) {
                alert('–í—Å—Ç–∞–≤—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞!');
                return;
            }

            try {
                const decodedData = JSON.parse(atob(importData));
                
                if (confirm('–≠—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                    homeworkDB = decodedData;
                    saveToDB();
                    updateStats();
                    showTodayHomework();
                    hideImportModal();
                    alert('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!');
                }
            } catch (e) {
                alert('–û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö!');
            }
        }

        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        function updateStats() {
            const pending = homeworkDB.homework.filter(hw => !hw.completed).length;
            const completed = homeworkDB.homework.filter(hw => hw.completed).length;
            
            document.getElementById('statsPending').textContent = pending;
            document.getElementById('statsCompleted').textContent = completed;
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('ru-RU');
        }

        function saveToDB() {
            localStorage.setItem('homeworkDB', JSON.stringify(homeworkDB));
        }

        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
        window.addEventListener('beforeunload', saveToDB);
    </script>
</body>
</html>
